# Запуск скрипта

```sh
    ruby router.rb
```

# Описание работы программы (RU)
Программа состоит из 2-х файлов:

>- 'router.rb - основной файл запуска'
>- 'db.txt - файл с постами'
<hr>

Модуль ***'**Resource**'*** содержит в себе 1 метод:
  1. `def connection(routes)` - Предлагает выбрать действие для работы с ресурсами(GET/POST/PUT/DELETE), а так же при выборе действия _'GET'_ предлагает показать все посты с индексом или отдельный пост по индексу.

Класс ***'**PostsController**'*** содержит в себе 6 методов:
  1. `def initialize` - Создает в переменной _'@posts'_ массив с постами.
  2. `def index` - Читает файл с постами и добавляет их в массив.
  3. `def show` - Читает файл с постами, запрашивает индекс поста и отображает пост по искомому индексу.
  4. `def create` - Запрашивает текст нового поста и добавляет его в конец файла с постами.
  5. `def update` - Запрашивает индекс поста, запрашивает текст поста и заменяет в файле пост по индексу на новый.
  6. `def destroy` - Запрашивает индекс поста и удаляет его из файла с постами.

Класс ***'**Router**'*** содержит в себе 3 метода:
  1. `def initialize` - создает пустой хэш.
  2. `def resources(klass, keyword)` - содержит в себе логику работы класса ***'**PostsController**'***
  3. `def init` - при запуске загружает `resources(PostsController, 'posts')` передавая в метод два параметра:
  - В переменную _'klass'_ передается класс ***'**PostsController**'***
  - В переменную _'keyword'_ передается строка _'posts'_.
<hr>
  
Запуск программы начинается с создания экземпляра класса ***'**Router**'***. После чего выполняется метод класса ***'**Router**'*** - _'init'_. В методе _'init'_ загружается метод _'resources'_ и принимает в параметрах класс ***'**PostsController**'*** и маршрут _'posts'_.

После загрузки метода _'resources'_ программа предлагает выбрать ресурс для взаимодействия (1. Посты/ 2. Комментарии/ q - Выход.). Нужно выбрать работу с постами. После того, как выбрали работу с постами, класс ***'**PostsController**'*** выполняет метод _'connection(routes)'_ из модуля ***'**Resource**'*** и передает ему маршрут _'posts'_. 

Метод _'connection(routes)'_ проверяет переданный маршрут и если он отсутствует то программа выдает ошибку **"Нет совпадений маршрута для PostController"**. Если маршрут передан верно, то программа предлагает выбрать взаимодействие с ресурсами:
  1. - GET. 
  2. - POST. 
  3. - PUT. 
  4. - DELETE 

При выборе 'GET' программа предлагает выбрать действие: 
  1. - Показать все посты с индексом. 
  2. - Показать пост по индексу.

После выбора действия выполняется `routes[GET][1 or 2].call`. Метод call, позволяет вызвать исполнение кода переданное в объект. В данном случае выполняется 

```
@routes[keyword] = {
  '1' => {
    '1' => controller.method(:index),
    '2' => controller.method(:show) 
    }
```

из метода _'resources'_ и в зависимости от выбранного действия программа выдает список постов с индексами или пост по искомому индексу.

При выборе 'POST' выполняется `routes[POST].call` и из метода _'resources'_ запускается 
```
@routes[keyword] = {
  '2' => controller.method(:create)
  }
```

При выборе 'PUT' выполняется `routes[PUT].call` и запускает из метода _'resources'_ запускается
```
@routes[keyword] = {
  '3' => controller.method(:update)
  }
```
При выборе 'DELETE' выполнится `routes[DELETE].call` и запустит из метода _'resources'_ запускается
```
@routes[keyword] = {
  '3' => controller.method(:destroy)
  }
```
<hr>
После работы с файлом программа возвращается в главное меню и позволяет выбрать новую операцию или завершить программу.